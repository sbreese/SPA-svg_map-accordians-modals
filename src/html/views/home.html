
<div>

    <!-- Region/State Map -->
    <div id="background-video" class="mobile-background">
        <div id="darken-video"></div>
        <!-- Region View Buttons -->
        <div class="region-view-icon-container" ng-if="showRegionOptions">

            <!-- Map View Button -->
            <a href="" ng-click="selectRegionView(REGION_VIEWS.MAP)" ng-class="{'active': isRegionViewActive(REGION_VIEWS.MAP)}">
                <i class="fi-marker"></i>
            </a>

            <!-- List View Button -->
            <a href="" ng-click="selectRegionView(REGION_VIEWS.LIST)" ng-class="{'active': isRegionViewActive(REGION_VIEWS.LIST)}">
                <i class="fi-thumbnails"></i>
            </a>

            <div class="region-icon-background"></div>

        </div>

        <!-- Countdown Bell -->
        <div class="countdown-bell-container show-for-large-up">

            <!-- Map View Button -->
            <img src="assets/images/alarm_bell.png">
            <p id="offer-days">{{offerDaysLeft}}</p>
            <p id="days-label">DAYS</p>

        </div>

        <!-- MAP / REGION BUTTONS -->
        <div class="row" id="map-absolute">

            <!-- MAP VIEW -->
            <div class="full-column" ng-if="true" ng-show="isRegionViewActive(REGION_VIEWS.MAP)">

                <!-- Map Directive -->
                <div id="region-map" svgmap region-button-click-action="regionCircleButtonClick(region)" state-click-action="stateButtonClick(state)" regions="regions"></div>

            </div>

        </div>

        <!-- Search Box & Dropdown Row -->
        <div class="row">
            <div class="column ebreaks-head-container">
                <div id="ebreaks-head">
                    <h1 id="ebreaks-head1">eBreaks<sup>&reg;</sup></h1>
                    <h3 id="ebreaks-head2">Save 20% on great locations across North America.</h3>
                </div>
            </div>
            <div sticky-header>
                <div class="row">
                    <div class="small-10 small-offset-1 medium-8 medium-offset-2 column search-container">
                        <!-- Search Box & Dropdown -->
                        <input type="text" ng-model="selectedBreak" placeholder="{{searchPlaceholder}}"
                               ng-disabled="disableSearch"
                               typeahead="break as break.HOTEL_NAME for break in getBreaksForInput($viewValue) | breaksSearchFilter:$viewValue:10:50"
                               typeahead-template-url="html/templates/breakListItem.html"
                               typeahead-on-select="inputItemSelected($model)"
                               typeahead-loading="loadingBreaksForInput"
                               typeahead-auto-open ng-change="inputChanged()"
                               class="form-control">
                        <div id="button-holder">
                            <img src="assets/images/magnifying_glass.png">
                        </div>
                    </div>
                </div>
            </div>

            <!-- REGION BUTTON VIEW -->
            <!-- Region Buttons -->
            <div class="small-10 small-offset-1 medium-8 medium-offset-2 column region-container" ng-show="isRegionViewActive(REGION_VIEWS.LIST)">

                <div class="row">

                    <div class="small-6 column">
                        <a region-button region="Pacific" action="regionButtonClick(region)"></a>
                    </div>

                    <div class="small-6 column">
                        <a region-button region="New England" action="regionButtonClick(region)"></a>
                    </div>

                </div>

                <div class="row">

                    <div class="small-6 column">
                        <a region-button region="North Central" action="regionButtonClick(region)"></a>
                    </div>

                    <div class="small-6 column">
                        <a region-button region="Canada" action="regionButtonClick(region)"></a>
                    </div>

                </div>

                <div class="row">

                    <div class="small-6 column">
                        <a region-button region="Mountain" action="regionButtonClick(region)"></a>
                    </div>

                    <div class="small-6 column">
                        <a region-button region="Southeast" action="regionButtonClick(region)"></a>
                    </div>

                </div>

                <div class="row">

                    <div class="small-6 large-offset-3 column">
                        <a region-button region="Other" action="regionButtonClick(region)"></a>
                    </div>

                </div>

            </div>

        </div>

    </div>

    <div class="subscribe-bar show-for-medium-up">
        <div class="subscribe-content">
            <div class="never-miss">
                <a href="https://www.marriott.com/rewards/myAccount/editEmailPreferences.mi"><img src="assets/images/envelope.png">Never Miss eBreaks</a>
            </div>
            <a href="https://www.marriott.com/rewards/myAccount/editEmailPreferences.mi">
                <div class="subscribe-button">
                <span>Subscribe Today</span>
                </div>
            </a>
        </div>
    </div>
    <div class="subscribe-bar show-for-small-only">
        <div class="subscribe-content">
            <div class="never-miss">
                <a href="https://www.marriott.com/rewards/myAccount/editEmailPreferences.mi"><img src="assets/images/envelope.png">Get eBreaks</a>
            </div>
            <a href="https://www.marriott.com/rewards/myAccount/editEmailPreferences.mi>
                <div class="subscribe-button">
                Subscribe
                </div>
            </a>
        </div>
    </div>
    <div class="ways-to-book-bar show-for-medium-up">
        <div class="ways-to-book-content">
            <div class="ways-content">
                <img src="assets/images/monitor.png"><!--i class="fi-monitor"></i-->
                <div class="ways-text">
                    <div class="big-text">
                        3 Easy Ways to Book
                    </div>
                    <span class="small-text">Click on a property below to make your reservation.<br>Enter MEB in the corporate/promotional box at <a href="https://www.marriott.com/search/default.mi">Marriott.com</a><br>Call 1.800.752.7571 or contact your <a href="http://www.marriott.com/help/global-phone-reservation-numbers.mi">worldwide reservation center</a>.</span>
                </div>
            </div>
            <div class="phone-icon">
                <img src="assets/images/phone.png"><!--i class="fi-telephone"></i-->
            </div>
        </div>
    </div>
    <div class="ways-to-book-bar show-for-small-only">
        <div class="ways-to-book-content">
            <div class="ways-text">
                <div class="big-text">3 Ways to Book</div>
                <span class="small-text">Click on a Hotel<br>Use Code MEB<br>Call 1.800.752.7571</span>
            </div>
        </div>
    </div>

    <div id="breaks-content">

        <!-- Section Separator -->
        <!--div class="section-separator no-margin"></div-->

        <!-- REGION / TOP DESTINATIONS ACCORDION -->
        <accordion class="region-group-accordion">

            <!-- TOP DESTINATIONS -->
            <accordion-group class="region-group" is-open="true"> <!-- To collapse when regions are clicked, replace true with regionAccordionGroups['TOPDEST'].isOpen -->
                <!-- Top Destinations Group Header -->
                <accordion-heading>
                    <div accordion-header-content group="'TOPDEST'" label="'Hot Locations'" is-open="true"></div>
                </accordion-heading>

                <!-- Top Destination Buttons -->
                <ul class="small-block-grid-2 medium-block-grid-4 large-block-grid-5 text-center the-grid" vertilize-container>
                    <li ng-repeat="topDestination in topDestinations" vertilize>
                        <a class="large button {{'top-destination-button_'+($index<5?$index:($index<10?$index-5:($index<15?$index-10:'0')))}}" href="" ng-class="{'selected': selectedTopDestination === topDestination}" 
                           ng-click="toggleTopDestination(topDestination)"><p>{{topDestination}}</p></a>
                    </li>
                </ul>

                <!-- Top Destination Hotel List -->
                <div ng-show="(selectedTopDestination)">
                    <div class="section-separator small"></div>

                    <ul class="hotel-grid" hotel-item-container is-open="regionAccordionGroups['TOPDEST'].isOpen">
                        <li hotel-item hotel="break" top-destination="true"
                            ng-repeat="break in breaks | filter:{MARKET_CITY: selectedTopDestination} | limitTo:20"></li>
                    </ul>
                </div>

            </accordion-group>
        </accordion>

            <div class="your-ebreaks-bar show-for-medium-up" ng-show="aRegionIsExpanded">
                <div class="ways-to-book-content">
                    <div class="ways-content">
                        <div class="ways-text">
                            <h2>Your eBreaks for {{StartDateRange}}&ndash;{{EndDateRange}}</h2>
                        </div>
                    </div>
                    <div class="phone-icon">
                    </div>
                </div>
            </div>
            <div class="your-ebreaks-bar show-for-small-only" ng-show="aRegionIsExpanded">
                <div class="ways-to-book-content">
                    <div class="ways-text">
                        <h2>eBreaks {{StartDateRange}}&ndash;{{EndDateRange}}</h2>
                    </div>
                </div>
            </div>

        <accordion class="region-group-accordion" close-others="true">
            <!-- REGION GROUPS -->
            <accordion-group class="region-group" is-open="regionAccordionGroups[region].isOpen"
                             ng-repeat="(region, regionGroup) in breaks | groupBy: 'REGION'">
                <!-- Region Group Header -->
                <accordion-heading>
                    <div accordion-header-content group="region" label="formatRegionName(region)" is-open="regionAccordionGroups[region].isOpen"></div>
                </accordion-heading>

                <!-- Group by State -->
                <div class="row ng-hide state-containers" ng-hide="regionAccordionGroups[state].isHidden" ng-repeat="(state, hotels) in regionGroup | groupBy: 'PROPERTY_STATE'">

                    <div class="full-column">

                        <!-- State Group Header -->
                        <h3 id="STATE_{{state.replace(' ','_').replace(' ','_')}}">{{statesService.getStateName(state)}}</h3>

                        <!-- Hotel List -->
                        <ul class="hotel-grid" hotel-item-container is-open="regionAccordionGroups[region].isOpen">

                            <!-- Hotel Items -->
                            <li hotel-item hotel="hotel" top-destination="false"
                                ng-repeat="hotel in hotels | orderBy:'-TOP_DESTINATION'"></li>

                        </ul>

                    </div>
                </div>

            </accordion-group>
        </accordion>

    </div>

  <script type="text/ng-template" id="myModalContent.html">
    <div class="text-center state-list"><h3>{{items.selectedRegionFormatted}} Region</h3>

                <ul class="small-block-grid-2 medium-block-grid-2 large-block-grid-2 text-center the-grid" vertilize-container>
                    <li ng-repeat="(state, count) in items.regions[items.selectedRegion].states">
                        <a class="large button state-button" ng-click="selected.item = state; ok();"><p>{{statesService.getStateName(state)}}</p></a>
                    </li>
                </ul>
    </div>
    <!--p>Selected: <b>{{ selected.item }}</b></p-->
    <!--button class="button secondary" ng-click="reposition()">Reset top position</button-->
    <!--button class="button" ng-click="ok()">Cancel</button-->
    <a class="close-reveal-modal" ng-click="cancel()">&#215;</a>
  </script>

   <ul id="dropdown-example-1-{{region}}" class="f-dropdown" ng-repeat="(region, regionGroup) in breaks | groupBy: 'REGION'" style="position: relative !important; top: 342 !important; left: 193 !important">
        <li ng-repeat="(state, hotels) in regionGroup | groupBy: 'PROPERTY_STATE'">
            <a>{{state}}</a>
        </li>
    </ul>

    <!-- Terms & Conditions -->
    <accordion class="terms-and-conditions-group-accordion">

            <!-- TOP DESTINATIONS -->
        <accordion-group class="terms-and-conditions-group" is-open="true"> <!-- To collapse when regions are clicked, replace true with regionAccordionGroups['TOPDEST'].isOpen -->
                <!-- Top Destinations Group Header -->
                <accordion-heading>
                    <div terms-and-conditions-header-content group="t_and_d" label="'Terms &amp; Conditions'" is-open="true"></div>
                </accordion-heading>

                <ul id="term_and_cond_list">
                    <li>Rates are per night. Thursday requires a Friday night stay. Sunday requires a Saturday night stay.</li>
                    <li>Rates are valid for dates specified in email at advertised hotels only.</li>
                    <li>eBreaks rates are exclusive to customers who subscribe to the eBreaks program. Therefore, these rates do not qualify for Marriott's Look No Further<sup>&reg;</sup> Best Rate Guarentee.</li>
                    <li>A limited number of rooms are available and will be sold on a first-come, first-served basis.</li>
                    <li>Advance bookings are required and must be guarenteed with a credit card.</li>
                    <li>Rates are offered Thursday through Sunday.  Some hotels only offer eBreaks rates Friday-Sunday.  These hotels are indicated with an asterisk (*) next to the rate.</li>
                    <li>Rates are for standard rooms, per night and based on single or double occupancy.</li>
                    <li>Rates are non-commissionable and do not include taxes, fees, other costs or gratuities.</li>
                    <li>Rates cannot be used in conjunction with other offers and/or discounts.</li>
                    <li>eBreaks does not apply to groups of 10 or more rooms.</li>
                    <li>Canadian cities are quoted in Canadian dollars and U.S. cities are quoted in U.S. dollars. All other destinations are quoted in currency listed.</li>
                    <li>Rates are eligible for Marriott Rewards&reg; Points and miles credit. <a href="https://www.marriott.com/rewards/createAccount/createAccountPage1.mi?segmentId=elite.nonrewards">Join Marriott Rewards</a></li>
                </ul>

            </accordion-group>
        </accordion>

    </div>
</div>
